#include <stdio.h>
 struct process{
  int pid, at, bt, ct, tat, wt, rt;
 };
 int main(){
  int n, completed = 0, time = 0;
  float total_tat = 0, total_wt = 0;
  printf("Enter the No. of Processes:- ");
  scanf("%d",&n);
  struct process p[n];
  for(int i = 0;i < n;i++){
    p[i].pid = i + 1;
    printf("Enter the Arrival Time & Burst Time For Process P%d: ", i + 1);
    scanf("%d %d", &p[i].at, &p[i].bt);
    p[i].rt = p[i].bt;
  }
  while(completed < n){
    int min_index = -1;
    for(int i = 0;i < n;i++){
      if(p[i].at <= time && p[i].rt > 0){
        if(min_index == -1 || p[i].rt < p[min_index].rt){
          min_index = i;
        }
      }
    }
    if(min_index == -1){
      time++;
      continue;
    }
    p[min_index].rt--;
    time++;
    if(p[min_index].rt == 0){
      completed ++;
      p[min_index].ct = time;
      p[min_index].tat = p[min_index].ct - p[min_index].at;
      p[min_index].wt = p[min_index].tat - p[min_index].bt;
      total_tat += p[min_index].tat;
      total_wt += p[min_index].wt;
    }
  }
  printf("\nPID\tAT\tBT\tCT\tTAT\tWT\n");
  for(int i = 0;i < n;i++){
    printf("P%d\t%d\t%d\t%d\t%d\t%d\n",p[i].pid,p[i].at,p[i].bt,p[i].ct,p[i].tat,p[i].wt);
  }
  printf("\nAvg. TAT = %f",total_tat / n);
  printf("\nAvg. WT = %f\n",total_wt / n);
  return 0;
 }
 
